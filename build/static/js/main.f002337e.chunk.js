(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(2),l=function(e){var n=e.handleDelete,t=e.person,a=t.name,c=t.phone;return r.a.createElement("div",null,"Name: ",a," | Phone: ",c," ",r.a.createElement("button",{onClick:function(){return n(e.person)}},"Delete"))},i=function(e){var n=e.persons,t=e.handleDelete;return n.map((function(e){return r.a.createElement(l,{key:e.phone,person:e,handleDelete:t})}))},m=function(e){var n=e.newSearch,t=e.handleSearchInput,a=e.newQuery;return r.a.createElement("div",null,"Search a person: ",r.a.createElement("input",{value:n,onChange:t}),r.a.createElement("br",null),r.a.createElement("br",null),a.map((function(e){return r.a.createElement(l,{key:e.name,person:e})})))},s=function(e){var n=e.handleSubmit,t=e.newName,a=e.newPhone,c=e.handleNameInput,o=e.handlePhoneInput;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:t,onChange:c}),"\xa0 Number: ",r.a.createElement("input",{value:a,onChange:o})," ",r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.message,t=n.content,a=n.type;return null===t?null:r.a.createElement("div",{className:a},t)},f=(t(19),t(3)),h=t.n(f),p="/api/persons",b=function(){return h.a.get(p)},v=function(e){return h.a.post(p,e)},E=function(e,n){return h.a.patch("".concat(p,"/").concat(e),n)},w=function(e){return h.a.delete("".concat(p,"/").concat(e))},g=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),l=Object(u.a)(o,2),f=l[0],h=l[1],p=Object(a.useState)(""),g=Object(u.a)(p,2),y=g[0],S=g[1],j=Object(a.useState)(""),O=Object(u.a)(j,2),N=O[0],k=O[1],C=Object(a.useState)([]),I=Object(u.a)(C,2),P=I[0],D=I[1],A=Object(a.useState)([]),J=Object(u.a)(A,2),Q=J[0],T=J[1];Object(a.useEffect)((function(){b().then((function(e){c(e.data)}))}),[]);var U=function(e){var n={content:"".concat(f," has been successfully ").concat(e,"!"),type:"success"};T(n),setTimeout((function(){T([])}),3e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(d,{message:Q}),r.a.createElement(m,{newSearch:N,newQuery:P,handleSearchInput:function(e){k(e.target.value);var n=t.filter((function(n){return(0===n.name.localeCompare(e.target.value,void 0,{sensitivity:"base"})||n.name.toUpperCase().includes(e.target.value.toUpperCase()))&&""!==e.target.value}));D(n)}}),r.a.createElement("h2",null,"Add New Person"),r.a.createElement(s,{handleSubmit:function(e){if(e.preventDefault(),t.find((function(e){return e.phone===y})))window.confirm("".concat(y," is already assigned, try something else!"));else if(t.find((function(e){return e.name===f}))){var n=t.find((function(e){return e.name===f})),a={name:f,phone:y,id:n.id||null};window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))&&E(n.id,a).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e.data}))),h(""),S(""),U("updated")})).catch((function(e){!function(e){var n={content:"".concat(e,"'s info has already been removed from the server!"),type:"error"};T(n),setTimeout((function(){T([])}),3e3)}(f),console.log(e),c(t.filter((function(e){return e.name!==f}))),h(""),S("")}))}else{v({name:f,phone:y}).then((function(e){h(""),S(""),c(t.concat(e.data)),U("added")}))}},newName:f,newPhone:y,handleNameInput:function(e){h(e.target.value)},handlePhoneInput:function(e){S(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(i,{persons:t,handleDelete:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&w(e.id).then(c(t.filter((function(n){return n.id!==e.id})))).catch((function(e){console.log(e)}))}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f002337e.chunk.js.map