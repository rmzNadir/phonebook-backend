{"version":3,"sources":["components/Person.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","services/communication.js","App.js","index.js"],"names":["Person","props","handleDelete","person","name","phone","onClick","Persons","persons","map","key","Filter","newSearch","handleSearchInput","newQuery","value","onChange","placeholder","PersonForm","handleSubmit","newName","newPhone","handleNameInput","handlePhoneInput","onSubmit","type","Notification","message","content","className","baseUrl","axios","get","newObject","post","id","put","delete","App","useState","setPersons","setNewName","setNewPhone","setNewSearch","setNewQuery","notification","setNotification","useEffect","commService","then","response","data","successMessage","operation","successObject","setTimeout","ValidationError","err","e","target","search","filter","localeCompare","undefined","sensitivity","toUpperCase","includes","preventDefault","find","window","confirm","PersonToUpdate","updatedPersonObject","catch","errorName","error","personName","errorObject","errorMessage","concat","p","console","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mNAaeA,EAXA,SAACC,GAAW,IAChBC,EAAgBD,EAAhBC,aADe,EAEDD,EAAME,OAApBC,EAFe,EAEfA,KAAKC,EAFU,EAEVA,MAEZ,OACI,sCACWD,EADX,aAC2BC,EAD3B,IACkC,4BAAQC,QAAS,kBAAIJ,EAAaD,EAAME,UAAxC,YCC3BI,EANC,SAACN,GAAW,IAClBO,EAA0BP,EAA1BO,QAASN,EAAiBD,EAAjBC,aAEjB,OAAOM,EAAQC,KAAI,SAACN,GAAD,OAAY,kBAAC,EAAD,CAAQO,IAAKP,EAAOE,MAAOF,OAAQA,EAAQD,aAAcA,QCS3ES,EAZA,SAACV,GAAW,IAChBW,EAAwCX,EAAxCW,UAAUC,EAA8BZ,EAA9BY,kBAAkBC,EAAYb,EAAZa,SACnC,OACI,iDACqB,2BAAOC,MAAOH,EAAWI,SAAUH,EAAmBI,YAAY,8BACnF,6BACA,6BACCH,EAASL,KAAI,SAAAN,GAAM,OAAE,kBAAC,EAAD,CAAQO,IAAKP,EAAOC,KAAMD,OAAQA,SCIrDe,EAZI,SAACjB,GAAW,IACpBkB,EAAsElB,EAAtEkB,aAAcC,EAAwDnB,EAAxDmB,QAASC,EAA+CpB,EAA/CoB,SAAUC,EAAqCrB,EAArCqB,gBAAiBC,EAAoBtB,EAApBsB,iBAC3D,OACE,0BAAMC,SAAUL,GACd,sCACQ,2BAAOJ,MAAOK,EAASJ,SAAUM,EAAiBL,YAAY,uBADtE,gBAEiB,2BAAOF,MAAOM,EAAUL,SAAUO,EAAkBN,YAAY,0BAFjF,IAE4G,4BAAQQ,KAAK,UAAb,UCMnGC,EAZM,SAACzB,GAAW,IAAD,EACJA,EAAM0B,QAAvBC,EADqB,EACrBA,QAASH,EADY,EACZA,KAChB,OAAc,OAAVG,EACK,KAGP,yBAAKC,UAAWJ,GACbG,I,wBCRHE,EAAU,eAkBD,EAhBA,WACb,OAAOC,IAAMC,IAAIF,IAeJ,EAZA,SAAAG,GACb,OAAOF,IAAMG,KAAKJ,EAASG,IAWd,EARA,SAACE,EAAIF,GAClB,OAAOF,IAAMK,IAAN,UAAaN,EAAb,YAAwBK,GAAMF,IAOxB,EAJA,SAACE,GACZ,OAAOJ,IAAMM,OAAN,UAAgBP,EAAhB,YAA2BK,KCoKvBG,EA3KH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACT/B,EADS,KACAgC,EADA,OAGcD,mBAAS,IAHvB,mBAGTnB,EAHS,KAGAqB,EAHA,OAIgBF,mBAAS,IAJzB,mBAITlB,EAJS,KAICqB,EAJD,OAKkBH,mBAAS,IAL3B,mBAKT3B,EALS,KAKE+B,EALF,OAMgBJ,mBAAS,IANzB,mBAMTzB,EANS,KAMC8B,EAND,OAOwBL,mBAAS,IAPjC,mBAOTM,EAPS,KAOKC,EAPL,KAShBC,qBAAU,WACRC,IAAqBC,MAAK,SAACC,GACzBV,EAAWU,EAASC,WAErB,IAEH,IAAMC,EAAiB,SAACC,GACtB,IAAMC,EAAgB,CACpB1B,QAAQ,GAAD,OAAKR,EAAL,kCAAsCiC,EAAtC,KACP5B,KAAM,WAERqB,EAAgBQ,GAChBC,YAAW,WACTT,EAAgB,MAChB,MAcEU,EAAkB,SAACC,GAKvBX,EAJoB,CAClBlB,QAAS6B,EACThC,KAAM,UAGR8B,YAAW,WACTT,EAAgB,MAChB,MAsGJ,OACE,6BACE,yCACA,kBAAC,EAAD,CAAcnB,QAASkB,IACvB,kBAAC,EAAD,CACEjC,UAAWA,EACXE,SAAUA,EACVD,kBAnCoB,SAAC6C,GACzBf,EAAae,EAAEC,OAAO5C,OACtB,IAAI6C,EAASpD,EAAQqD,QACnB,SAAC1D,GAAD,OAGS,IAFNA,EAAOC,KAAK0D,cAAcJ,EAAEC,OAAO5C,WAAOgD,EAAW,CACpDC,YAAa,UAEb7D,EAAOC,KAAK6D,cAAcC,SAASR,EAAEC,OAAO5C,MAAMkD,iBACjC,KAAnBP,EAAEC,OAAO5C,SAIb6B,EAAYgB,MA0BV,8CACA,kBAAC,EAAD,CACEzC,aA/Ge,SAACuC,GAGpB,GAFAA,EAAES,iBAEC3D,EAAQ4D,MAAK,SAACjE,GAAD,OAAYA,EAAOE,QAAUgB,KACxCgD,OAAOC,QAAP,UAAkBjD,EAAlB,mDAML,GAAIb,EAAQ4D,MAAK,SAACjE,GAAD,OAAYA,EAAOC,OAASgB,KAAU,CAEvD,IAAImD,EAAiB/D,EAAQ4D,MAAK,SAACjE,GAAD,OAAYA,EAAOC,OAASgB,KAExDoD,EAAsB,CAC1BpE,KAAMgB,EACNf,MAAOgB,EACPc,GAAIoC,EAAepC,IAAM,MAGtBkC,OAAOC,QAAP,UAAkBlD,EAAlB,4EACD4B,EAAmBuB,EAAepC,GAAGqC,GAAqBvB,MAAK,SAAAC,GAE7DV,EAAWhC,EAAQC,KAAI,SAAAN,GAAM,OAAIA,EAAOgC,KAAOoC,EAAepC,GAAKhC,EAAS+C,EAASC,SACrFV,EAAW,IACXC,EAAY,IACZU,EAAe,cAGdqB,OAAM,SAAAhB,GAC0B,oBAA9BA,EAAIP,SAASC,KAAKuB,UACnBlB,EAAgBC,EAAIP,SAASC,KAAKwB,SArDvB,SAACC,GACpB,IAAMC,EAAc,CAClBjD,QAAQ,GAAD,OAAKgD,EAAL,qDACPnD,KAAM,SAERqB,EAAgB+B,GAChBtB,YAAW,WACTT,EAAgB,MAChB,KAgDMgC,CAAa1D,GAEboB,EAAWhC,EAAQqD,QAAO,SAAA1D,GAAM,OAAIA,EAAOC,OAASgB,MACpDqB,EAAW,IACXC,EAAY,YAMb,CAKLM,EAJwB,CACtB5C,KAAMgB,EACNf,MAAOgB,IAE2B4B,MAAK,SAACC,GAExCT,EAAW,IACXC,EAAY,IACZF,EAAWhC,EAAQuE,OAAO7B,EAASC,OACnCC,EAAe,YAEdqB,OAAM,SAAAhB,GAEPD,EAAgBC,EAAIP,SAASC,KAAKwB,YAsDlCvD,QAASA,EACTC,SAAUA,EACVC,gBAnDkB,SAACoC,GACvBjB,EAAWiB,EAAEC,OAAO5C,QAmDhBQ,iBAhDmB,SAACmC,GACxBhB,EAAYgB,EAAEC,OAAO5C,UAiDnB,uCACA,kBAAC,EAAD,CAASP,QAASA,EAASN,aAhCV,SAACC,GAEjBkE,OAAOC,QAAP,0CAAkDnE,EAAOC,KAAzD,OACD4C,EAAmB7C,EAAOgC,IAAIc,KAC5BT,EAAWhC,EAAQqD,QAAO,SAAAmB,GAAC,OAAIA,EAAE7C,KAAOhC,EAAOgC,QAGhDsC,OAAM,SAAAE,GACLM,QAAQC,IAAIP,WClJpBQ,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.2a23327a.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = (props) => {\n    const {handleDelete} = props\n    const {name,phone} = props.person\n    //console.log(props.person)\n    return (\n        <div>\n            Name: {name} | Phone: {phone} <button onClick={()=>handleDelete(props.person)}>Delete</button>\n        </div>\n    )\n}\n\nexport default Person\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = (props) => {\n  const { persons, handleDelete } = props;\n  //console.log(persons)\n  return persons.map((person) => <Person key={person.phone} person={person} handleDelete={handleDelete} />);\n};\n\nexport default Persons;\n","import React from 'react'\nimport Person from './Person'\n\nconst Filter = (props) => {\n    const {newSearch,handleSearchInput,newQuery} = props\n    return (\n        <div>\n            Search a person: <input value={newSearch} onChange={handleSearchInput} placeholder='Insert first or last name'/>\n            <br/>\n            <br/>\n            {newQuery.map(person=><Person key={person.name} person={person}/>)}\n        </div>\n    )\n}\n\nexport default Filter\n","import React from \"react\";\n\nconst PersonForm = (props) => {\n    const {handleSubmit, newName, newPhone, handleNameInput, handlePhoneInput} = props\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        Name: <input value={newName} onChange={handleNameInput} placeholder='Insert a full name'/>\n        &nbsp; Number: <input value={newPhone} onChange={handlePhoneInput} placeholder='Insert a phone number' /> <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react'\n\nconst Notification = (props) => {\n    const {content, type} = props.message\n    if (content===null){\n      return null\n    }\n    return (\n      <div className={type}>\n        {content}\n      </div>\n    )\n}\n\nexport default Notification\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst remove = (id) => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { \n  getAll: getAll, \n  create: create, \n  update: update,\n  remove: remove,\n}","import React, { useState, useEffect } from \"react\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Notification from \"./components/Notification\"\nimport \"./App.css\"\n\nimport commService from \"./services/communication\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [newSearch, setNewSearch] = useState(\"\");\n  const [newQuery, setNewQuery] = useState([]);\n  const [notification, setNotification] = useState([])\n\n  useEffect(() => {\n    commService.getAll().then((response) => {\n      setPersons(response.data);\n    });\n  }, []);\n\n  const successMessage = (operation) => {\n    const successObject = {\n      content: `${newName} has been successfully ${operation}!`,\n      type: \"success\"\n    }\n    setNotification(successObject)\n    setTimeout(()=>{\n      setNotification([])\n    },3000)\n  }\n\n  const errorMessage = (personName) =>{\n    const errorObject = {\n      content: `${personName}'s info has already been removed from the server!`,\n      type: \"error\"\n    }\n    setNotification(errorObject)\n    setTimeout(()=>{\n      setNotification([])\n    },3000)\n  }\n\n  const ValidationError = (err) => {\n    const errorObject = {\n      content: err,\n      type: \"error\"\n    }\n    setNotification(errorObject)\n    setTimeout(()=>{\n      setNotification([])\n    },10000)\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if(persons.find((person) => person.phone === newPhone )){\n      if(window.confirm(`${newPhone} is already assigned, try something else!`)){\n        return\n      }\n      return\n    }\n\n    if (persons.find((person) => person.name === newName)) {\n     \n    let PersonToUpdate = persons.find((person) => person.name === newName)\n\n    const updatedPersonObject = {\n      name: newName,\n      phone: newPhone,\n      id: PersonToUpdate.id || null,\n    };\n      //console.log(PersonToUpdate)\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n        commService.update(PersonToUpdate.id,updatedPersonObject).then(response => {\n          //console.log(response)\n          setPersons(persons.map(person => person.id !== PersonToUpdate.id ? person : response.data))\n          setNewName(\"\");\n          setNewPhone(\"\");\n          successMessage(\"updated\")\n          //console.log(persons)\n          //console.log(notification)\n        }).catch(err => {\n          if(err.response.data.errorName==='ValidationError'){\n            ValidationError(err.response.data.error)\n            //console.log(err.response.data.errorName)\n          }else{\n            errorMessage(newName)\n            //console.log(err)\n            setPersons(persons.filter(person => person.name !== newName))\n            setNewName(\"\");\n            setNewPhone(\"\");\n          }\n          \n\n        })\n      }\n    } else {\n      const newPersonObject = {\n        name: newName,\n        phone: newPhone,\n      };\n      commService.create(newPersonObject).then((response) => {\n        //console.log(response)\n        setNewName(\"\");\n        setNewPhone(\"\");\n        setPersons(persons.concat(response.data));\n        successMessage(\"added\")\n        //console.log(persons)\n      }).catch(err => {\n        //console.log(err.response.data)\n        ValidationError(err.response.data.error)\n      })\n    }\n  };\n\n  const handleNameInput = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handlePhoneInput = (e) => {\n    setNewPhone(e.target.value);\n  };\n\n  const handleSearchInput = (e) => {\n    setNewSearch(e.target.value);\n    let search = persons.filter(\n      (person) =>\n        (person.name.localeCompare(e.target.value, undefined, {\n          sensitivity: \"base\",\n        }) === 0 ||\n          person.name.toUpperCase().includes(e.target.value.toUpperCase())) &&\n        e.target.value !== \"\"\n    );\n    /*the line above filters through the persons array and checks every name property inside the array list to see if either the stored name is exactly the same as the input or if the stored name includes what is currently in the input field*/\n    //console.log(search)\n    setNewQuery(search);\n  };\n\n  const handleDelete = (person) =>{\n    //console.log(person)\n    if(window.confirm(`Are you sure you want to delete ${person.name}?`)){\n      commService.remove(person.id).then(\n        setPersons(persons.filter(p => p.id !== person.id)),\n        //console.log(persons)\n      )\n      .catch(error => {\n        console.log(error)\n      })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification}/>\n      <Filter\n        newSearch={newSearch}\n        newQuery={newQuery}\n        handleSearchInput={handleSearchInput}\n      />\n      {/*we call the Filter component while passing state and an event handler as props*/}\n      <h2>Add New Person</h2>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        newName={newName}\n        newPhone={newPhone}\n        handleNameInput={handleNameInput}\n        handlePhoneInput={handlePhoneInput}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}