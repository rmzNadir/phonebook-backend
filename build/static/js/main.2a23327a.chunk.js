(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=t(2),l=function(e){var n=e.handleDelete,t=e.person,a=t.name,o=t.phone;return r.a.createElement("div",null,"Name: ",a," | Phone: ",o," ",r.a.createElement("button",{onClick:function(){return n(e.person)}},"Delete"))},i=function(e){var n=e.persons,t=e.handleDelete;return n.map((function(e){return r.a.createElement(l,{key:e.phone,person:e,handleDelete:t})}))},s=function(e){var n=e.newSearch,t=e.handleSearchInput,a=e.newQuery;return r.a.createElement("div",null,"Search a person: ",r.a.createElement("input",{value:n,onChange:t,placeholder:"Insert first or last name"}),r.a.createElement("br",null),r.a.createElement("br",null),a.map((function(e){return r.a.createElement(l,{key:e.name,person:e})})))},m=function(e){var n=e.handleSubmit,t=e.newName,a=e.newPhone,o=e.handleNameInput,c=e.handlePhoneInput;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:t,onChange:o,placeholder:"Insert a full name"}),"\xa0 Number: ",r.a.createElement("input",{value:a,onChange:c,placeholder:"Insert a phone number"})," ",r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.message,t=n.content,a=n.type;return null===t?null:r.a.createElement("div",{className:a},t)},f=(t(19),t(3)),h=t.n(f),p="/api/persons",b=function(){return h.a.get(p)},v=function(e){return h.a.post(p,e)},E=function(e,n){return h.a.put("".concat(p,"/").concat(e),n)},w=function(e){return h.a.delete("".concat(p,"/").concat(e))},y=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),l=Object(u.a)(c,2),f=l[0],h=l[1],p=Object(a.useState)(""),y=Object(u.a)(p,2),g=y[0],S=y[1],j=Object(a.useState)(""),O=Object(u.a)(j,2),N=O[0],I=O[1],k=Object(a.useState)([]),C=Object(u.a)(k,2),P=C[0],D=C[1],T=Object(a.useState)([]),A=Object(u.a)(T,2),J=A[0],Q=A[1];Object(a.useEffect)((function(){b().then((function(e){o(e.data)}))}),[]);var U=function(e){var n={content:"".concat(f," has been successfully ").concat(e,"!"),type:"success"};Q(n),setTimeout((function(){Q([])}),3e3)},x=function(e){Q({content:e,type:"error"}),setTimeout((function(){Q([])}),1e4)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(d,{message:J}),r.a.createElement(s,{newSearch:N,newQuery:P,handleSearchInput:function(e){I(e.target.value);var n=t.filter((function(n){return(0===n.name.localeCompare(e.target.value,void 0,{sensitivity:"base"})||n.name.toUpperCase().includes(e.target.value.toUpperCase()))&&""!==e.target.value}));D(n)}}),r.a.createElement("h2",null,"Add New Person"),r.a.createElement(m,{handleSubmit:function(e){if(e.preventDefault(),t.find((function(e){return e.phone===g})))window.confirm("".concat(g," is already assigned, try something else!"));else if(t.find((function(e){return e.name===f}))){var n=t.find((function(e){return e.name===f})),a={name:f,phone:g,id:n.id||null};window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))&&E(n.id,a).then((function(e){o(t.map((function(t){return t.id!==n.id?t:e.data}))),h(""),S(""),U("updated")})).catch((function(e){"ValidationError"===e.response.data.errorName?x(e.response.data.error):(!function(e){var n={content:"".concat(e,"'s info has already been removed from the server!"),type:"error"};Q(n),setTimeout((function(){Q([])}),3e3)}(f),o(t.filter((function(e){return e.name!==f}))),h(""),S(""))}))}else{v({name:f,phone:g}).then((function(e){h(""),S(""),o(t.concat(e.data)),U("added")})).catch((function(e){x(e.response.data.error)}))}},newName:f,newPhone:g,handleNameInput:function(e){h(e.target.value)},handlePhoneInput:function(e){S(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(i,{persons:t,handleDelete:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&w(e.id).then(o(t.filter((function(n){return n.id!==e.id})))).catch((function(e){console.log(e)}))}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.2a23327a.chunk.js.map